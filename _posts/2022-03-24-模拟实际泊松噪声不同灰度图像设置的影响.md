---
layout: post
title: 模拟泊松噪声不同灰度图像设置的影响
categories: [Image process]
description: some word here
keywords: Noise simulation

---

# 遇到的问题

通过PMT采集数据后，得到的是一个一维数据，然后转换为二维图像，归一化后得到如下图：

<img src="../../../../Desktop/关于泊松噪声的一些整理/733-b.png" alt="733-b"  />

本人想通过一张清晰的图片，模拟出上述图片类似分布的泊松噪声。

一开始思路是这样的，因为本身采集系统的原因，周围的光强会比中间的光强弱。采集的光强分布如下所示：

![Figure2, effciency map](https://raw.githubusercontent.com/star-twinking/CloudImage/main/ImgforBlog/effciency.png)

假设中间收集效率是1，那么周围的收集效率比1低。所以整幅图片的强度类似于一个从中间到外面递减的圆。

这个强度分布会对噪声产生影响。下面解释为什么

# 强度对泊松噪声的影响

因为泊松噪声的特点是越强的信号值，那么噪声也越强。这是泊松分布的统计特性决定的。引用一张维基百科的图，来说明这个原因：

<img src="../../../../Desktop/关于泊松噪声的一些整理/download.png" alt="download" style="zoom: 67%;" />

上述的$\lambda$就是采集信号的数值大小，所以越大的$\lambda$可以产生的k，会比更小的$\lambda$产生的噪声数方差更大。比如上面$\lambda=4$时，产生k属于[3, 5]范围的概率会比$\lambda=10$的时候，产生k属于[9,11]的概率要大（看两个范围的概率密度函数的积分的面积大小）。所以$\lambda=4和\lambda=10$产生一样的噪声水平，$\lambda=10$的概率会更大。

总的来说，就是泊松分布的特性导致了，强度越大的信号，泊松噪声也越大。

按照上述原则，我们模拟一张清晰的图片，再给这个图片加上上面强度分布的Map。他在边缘产生的噪声会小于中间的噪声，但是我们去观察实际数据，发现图像边缘的噪声会比中间的大。也就是说，这张黑色为底的图片和泊松分布的数学原理不符合。

# 探究原因

我对一张纯强度分布加泊松噪声，然后对他的反色加一样光子数的泊松噪声。结果如下：

<img src="../../../../Desktop/关于泊松噪声的一些整理/Map difference.png" alt="Map difference" style="zoom:150%;" />

下面是两个噪声图片的比较图：

<img src="../../../../Desktop/关于泊松噪声的一些整理/compare.png" alt="compare" style="zoom:250%;" />

可以看出，黑底的图片，也就是0-1的灰阶；如果时0表示黑色，1表示白色时，白色的特征部分泊松噪声较多；如果0表示白色，1表示黑色，这样黑色的特征泊松噪声较多。后面这个情况和我们实际拍摄的结果时相符的。

我再回去看采集到的原始信号：

![273-line](https://raw.githubusercontent.com/star-twinking/CloudImage/main/ImgforBlog/273-line.png)

原来有信号的部分，就是值比较小的。没有型号的部分，是数值比较大的。我后面处理保存图片的时候，给他们做了反色的操作。所以正常来讲就是应该将图像转换为0-1的灰阶，0表示黑色，1表示白色。即上述第二种的方式。

下次采集到的数据，如果要考虑泊松噪声，应该注意信号值的大小，谁是特征部分，谁是信号部分。